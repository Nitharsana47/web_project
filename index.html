<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flight Schedule - SkyVoyage</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #e0f7fa, #80deea);
            color: #333;
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        .header h1 {
            font-size: 2.5rem;
            color: #0288d1;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
        .flight-card {
            background: #fff;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            padding: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
        }
        .flight-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
        }
        .flight-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .flight-header h2 {
            font-size: 1.5rem;
            color: #0288d1;
            font-weight: 600;
            display: flex;
            align-items: center;
        }
        .flight-details {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 15px;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 10px;
        }
        .flight-info {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding-bottom: 10px;
        }
        .info-box {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            flex-shrink: 0;
            min-width: 150px;
            font-size: 0.9rem;
            color: #444;
        }
        .info-box strong {
            display: block;
            font-size: 1.1rem;
            color: #0288d1;
        }
        .promo {
            background: #ffcc99;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 12px;
            color: #b35600;
        }
        .seat-map {
            margin-top: 20px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 10px;
            border: 1px solid #ddd;
        }
        .seat-map label {
            font-weight: 600;
            margin-right: 10px;
            font-size: 1rem;
        }
        .seat-map select {
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 0.9rem;
            margin-right: 10px;
            width: 200px;
        }
        .seat-grid, .bin-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(45px, 1fr));
            gap: 8px;
            margin-top: 15px;
        }
        .seat, .bin-slot {
            padding: 10px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        .seat.available {
            background: #4caf50;
            color: white;
        }
        .seat.booked {
            background: #f44336;
            color: white;
            cursor: not-allowed;
        }
        .seat.reserved {
            background: #ff9800;
            color: white;
            cursor: not-allowed;
        }
        .seat.premium {
            background: #9c27b0;
            color: white;
            border: 2px solid #ab47bc;
        }
        .seat.vip-service::after, .seat.enhanced-privacy::after {
            content: attr(data-label);
            position: absolute;
            top: -5px;
            right: -5px;
            background: #d81b60;
            color: white;
            font-size: 0.7rem;
            padding: 2px 5px;
            border-radius: 3px;
        }
        .seat.enhanced-privacy::after {
            background: #0288d1;
        }
        .seat.selected, .bin-slot.selected {
            border: 3px solid #0288d1;
            box-shadow: 0 0 8px rgba(2, 136, 209, 0.3);
        }
        .seat:hover.available {
            background: #43a047;
        }
        .bin-slot {
            background: #0288d1;
            color: white;
        }
        .bin-slot:hover {
            background: #0277bd;
        }
        .seat-legend {
            margin-top: 15px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            font-size: 0.8rem;
        }
        .legend-item {
            display: flex;
            align-items: center;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 5px;
            margin-right: 5px;
        }
        .option-button {
            background: linear-gradient(90deg, #ff9800, #ffb300);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }
        .option-button:hover {
            background: linear-gradient(90deg, #fb8c00, #ffa000);
        }
        .option-button.active {
            background: linear-gradient(90deg, #4caf50, #66bb6a);
        }
        .premium-section, .luggage-section {
            margin-top: 15px;
            padding: 15px;
            background: #f0f4f8;
            border-radius: 10px;
            border: 1px solid #ddd;
        }
        .premium-section h4, .luggage-section h4 {
            font-size: 1.2rem;
            color: #0288d1;
            margin-bottom: 10px;
        }
        .book-button {
            background: linear-gradient(90deg, #0288d1, #03a9f4);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            margin-top: 20px;
            transition: all 0.3s ease;
        }
        .book-button:hover {
            background: linear-gradient(90deg, #0277bd, #039be5);
        }
        .chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            height: 500px;
            background: linear-gradient(135deg, #87CEEB, #4682B4);
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            display: none;
            flex-direction: column;
            overflow: hidden;
            z-index: 1000;
        }
        .chatbot-header {
            background: #0288d1;
            color: white;
            padding: 10px;
            text-align: center;
            font-weight: 600;
        }
        .chatbot-header .close-chatbot {
            position: absolute;
            right: 10px;
            top: 10px;
            cursor: pointer;
            font-size: 20px;
        }
        .chatbot-body {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            background: url('https://www.transparenttextures.com/patterns/clouds.png');
            background-size: cover;
            position: relative;
        }
        .chatbot-body::before {
            content: '✈️';
            position: absolute;
            font-size: 30px;
            animation: fly 10s linear infinite;
        }
        @keyframes fly {
            0% { left: -30px; top: 20%; }
            100% { left: 100%; top: 80%; }
        }
        .chat-message {
            margin-bottom: 10px;
            padding: 8px 12px;
            border-radius: 10px;
            max-width: 80%;
            word-wrap: break-word;
        }
        .chat-message.bot {
            background: #ffffff;
            color: #333;
            margin-right: 20%;
        }
        .chat-message.user {
            background: #0288d1;
            color: white;
            margin-left: 20%;
            text-align: right;
        }
        .chatbot-input {
            display: flex;
            padding: 10px;
            background: #f8f9fa;
            border-top: 1px solid #ddd;
        }
        .chatbot-input input {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-right: 10px;
        }
        .chatbot-input button {
            background: #0288d1;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
        }
        .chatbot-input button:hover {
            background: #0277bd;
        }
        .chatbot-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #0288d1;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            font-size: 24px;
        }
        .chatbot-toggle:hover {
            background: #0277bd;
        }
        .search-form {
            margin-bottom: 20px;
        }
        .search-form input {
            padding: 8px;
            margin-bottom: 10px;
            width: 100%;
            max-width: 400px;
            display: inline-block;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1><i class="fas fa-plane-departure"></i> SkyVoyage - Book Your Flight</h1>
    </div>

    <!-- Search Form -->
    <div class="search-form">
        <input type="text" id="searchFrom" placeholder="Search from (e.g., Delhi)" onkeyup="filterFlights()">
        <input type="text" id="searchTo" placeholder="Search to (e.g., Mumbai)" onkeyup="filterFlights()">
    </div>

    <div id="flightList"></div>
</div>

<!-- Chatbot Interface -->
<div class="chatbot-toggle" onclick="toggleChatbot()">✈️</div>
<div class="chatbot-container" id="chatbot">
    <div class="chatbot-header">
        Sky Assistant
        <span class="close-chatbot" onclick="toggleChatbot()">×</span>
    </div>
    <div class="chatbot-body" id="chatbot-body">
        <div class="chat-message bot">Hello! I’m Sky Assistant. How can I help you today? ✈️</div>
    </div>
    <div class="chatbot-input">
        <input type='text' id='chatbot-input' placeholder='Type your message...' onkeypress='if(event.keyCode==13) sendMessage()'>
        <button onclick='sendMessage()'>Send</button>
    </div>
</div>

<script>
    // Static sample data to simulate backend response
    const flightData = {
        flights: {
            1: {
                flight_id: 1,
                flight_name: "AI101",
                route: "Delhi to Mumbai",
                airline: "Air India",
                depart_time: "08:00:00",
                arrive_time: "10:30:00",
                duration: "2h 30m"
            },
            2: {
                flight_id: 2,
                flight_name: "6E202",
                route: "Chennai to Bangalore",
                airline: "IndiGo",
                depart_time: "17:00:00",
                arrive_time: "18:30:00",
                duration: "1h 30m"
            },
            3: {
                flight_id: 3,
                flight_name: "AI303",
                route: "Bangalore to Delhi",
                airline: "Air India",
                depart_time: "06:00:00",
                arrive_time: "08:30:00",
                duration: "2h 30m"
            },
            4: {
                flight_id: 4,
                flight_name: "6E404",
                route: "Delhi to Chennai",
                airline: "IndiGo",
                depart_time: "07:00:00",
                arrive_time: "09:30:00",
                duration: "2h 30m"
            },
            5: {
                flight_id: 5,
                flight_name: "AI505",
                route: "Mumbai to Delhi",
                airline: "Air India",
                depart_time: "10:00:00",
                arrive_time: "12:30:00",
                duration: "2h 30m"
            }
        },
        flight_classes: {
            1: {
                Economy: { available_seats: 50, price: 3000.00 },
                Business: { available_seats: 20, price: 8000.00 },
                "First Class": { available_seats: 10, price: 15000.00 }
            },
            2: {
                Economy: { available_seats: 60, price: 2500.00 },
                Business: { available_seats: 15, price: 6000.00 },
                "First Class": { available_seats: 5, price: 12000.00 }
            },
            3: {
                Economy: { available_seats: 50, price: 2900.00 },
                Business: { available_seats: 20, price: 7000.00 },
                "First Class": { available_seats: 10, price: 14000.00 }
            },
            4: {
                Economy: { available_seats: 60, price: 2600.00 },
                Business: { available_seats: 15, price: 6500.00 },
                "First Class": { available_seats: 5, price: 13000.00 }
            },
            5: {
                Economy: { available_seats: 50, price: 3200.00 },
                Business: { available_seats: 20, price: 8500.00 },
                "First Class": { available_seats: 10, price: 16000.00 }
            }
        },
        seats: {
            1: {
                Economy: {
                    "1A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "1B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "1C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "1D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "1E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "2A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 }
                },
                Business: {
                    "1A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "1B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "1C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "1D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "1E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 }
                },
                "First Class": {
                    "1A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "1B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "1C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "1D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "1E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 }
                }
            },
            2: {
                Economy: {
                    "2A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "2B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "2C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "2D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "2E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "3A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 }
                },
                Business: {
                    "2A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 }
                },
                "First Class": {
                    "2A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "2E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 }
                }
            },
            3: {
                Economy: {
                    "3A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "3B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "3C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "3D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "3E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "4A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 }
                },
                Business: {
                    "3A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 }
                },
                "First Class": {
                    "3A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "3E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 }
                }
            },
            4: {
                Economy: {
                    "4A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "4B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "4C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "4D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "4E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "5A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 }
                },
                Business: {
                    "4A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 }
                },
                "First Class": {
                    "4A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "4E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 }
                }
            },
            5: {
                Economy: {
                    "5A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "5B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "5C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "5D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "5E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 0 },
                    "6A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "6B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "6C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "6D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "6E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 }
                },
                Business: {
                    "5A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "6A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "6B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "6C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "6D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "6E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 }
                },
                "First Class": {
                    "5A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "5E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "6A": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "6B": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "6C": { seat_type: "Middle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "6D": { seat_type: "Window", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 },
                    "6E": { seat_type: "Aisle", extra_cost: 0, status: "Available", reserved_until: null, is_premium: 1 }
                }
            }
        },
        bins: {
            1: [
                { bin_slot: "Bin 1", status: "Available" },
                { bin_slot: "Bin 2", status: "Available" },
                { bin_slot: "Bin 3", status: "Available" },
                { bin_slot: "Bin 4", status: "Available" },
                { bin_slot: "Bin 5", status: "Available" }
            ],
            2: [
                { bin_slot: "Bin 1", status: "Available" },
                { bin_slot: "Bin 2", status: "Available" },
                { bin_slot: "Bin 3", status: "Available" },
                { bin_slot: "Bin 4", status: "Available" },
                { bin_slot: "Bin 5", status: "Available" }
            ],
            3: [
                { bin_slot: "Bin 1", status: "Available" },
                { bin_slot: "Bin 2", status: "Available" },
                { bin_slot: "Bin 3", status: "Available" },
                { bin_slot: "Bin 4", status: "Available" },
                { bin_slot: "Bin 5", status: "Available" }
            ],
            4: [
                { bin_slot: "Bin 1", status: "Available" },
                { bin_slot: "Bin 2", status: "Available" },
                { bin_slot: "Bin 3", status: "Available" },
                { bin_slot: "Bin 4", status: "Available" },
                { bin_slot: "Bin 5", status: "Available" }
            ],
            5: [
                { bin_slot: "Bin 1", status: "Available" },
                { bin_slot: "Bin 2", status: "Available" },
                { bin_slot: "Bin 3", status: "Available" },
                { bin_slot: "Bin 4", status: "Available" },
                { bin_slot: "Bin 5", status: "Available" }
            ]
        }
    };

    // Render flights on page load
    window.onload = () => {
        renderFlights(flightData);
    };

    function renderFlights(data) {
        const flightList = document.getElementById('flightList');
        flightList.innerHTML = '';

        for (const flightId in data.flights) {
            const flight = data.flights[flightId];
            const flightName = flight.flight_name;
            const [source, destination] = flight.route.split(' to ');
            const airline = flight.airline;

            const flightCard = document.createElement('div');
            flightCard.className = 'flight-card';
            flightCard.setAttribute('data-from', source);
            flightCard.setAttribute('data-to', destination);
            flightCard.innerHTML = `
                <div class="flight-header">
                    <h2>
                        ${flight.route} Flight | ${airline} (${flightName})
                        <div class="promo">PROMO</div>
                    </h2>
                </div>
                <div class="flight-details">
                    <div>Departs: <strong>${flight.depart_time}</strong> | Arrives: <strong>${flight.arrive_time}</strong></div>
                    <div>Duration: <strong>${flight.duration}</strong></div>
                </div>
                <div class="flight-info">
                    ${renderFlightClasses(flightId, data.flight_classes)}
                </div>
                <form id="booking-form-${flightId}" onsubmit="handleBooking(event, ${flightId})">
                    <input type="hidden" name="flightId" value="${flightId}">
                    <input type="hidden" name="flightName" value="${flight.flight_name}">
                    <input type="hidden" name="route" value="${flight.route}">
                    <input type="hidden" name="departure" value="${flight.depart_time}">
                    <input type="hidden" name="arrival" value="${flight.arrive_time}">
                    <input type="hidden" id="selected-class-${flightId}" name="class" value="">
                    <input type="hidden" id="selected-seat-${flightId}" name="seat" value="">
                    <input type="hidden" id="selected-bin-${flightId}" name="bin_slot" value="">
                    <input type="hidden" id="premium-enabled-${flightId}" name="premium_enabled" value="0">
                    <input type="hidden" id="luggage-enabled-${flightId}" name="luggage_enabled" value="0">
                    <div class="seat-map">
                        <label>Select Class:</label>
                        <select onchange="showSeats(${flightId}, this.value)">
                            <option value="">Select Class</option>
                            ${Object.keys(data.flight_classes[flightId] || {}).map(cls => `<option value="${cls}">${cls}</option>`).join('')}
                        </select>
                        <div id="seat-map-${flightId}" class="seat-map-content"></div>
                        <div class="premium-section">
                            <button type="button" class="option-button" id="premium-button-${flightId}" onclick="togglePremiumSeats(${flightId})">Unlock Premium Seats (₹2000)</button>
                            <div id="premium-seats-${flightId}" class="premium-seats" style="display: none;">
                                <h4>Premium Seats (VIP Service & Enhanced Privacy)</h4>
                                <div id="premium-seat-grid-${flightId}" class="seat-grid"></div>
                            </div>
                        </div>
                        <div class="luggage-section">
                            <button type="button" class="option-button" id="luggage-button-${flightId}" onclick="toggleLuggageOptions(${flightId})">Reserve Luggage Space (₹300)</button>
                            <div id="luggage-options-${flightId}" class="luggage-options" style="display: none;">
                                <h4>Available Bin Slots</h4>
                                <div id="bin-grid-${flightId}" class="bin-grid">
                                    ${renderBins(flightId, data.bins)}
                                </div>
                            </div>
                        </div>
                        <div class="seat-legend">
                            <div class="legend-item"><span class="legend-color" style="background: #4caf50;"></span> Available</div>
                            <div class="legend-item"><span class="legend-color" style="background: #f44336;"></span> Booked</div>
                            <div class="legend-item"><span class="legend-color" style="background: #ff9800;"></span> Reserved</div>
                            <div class="legend-item"><span class="legend-color" style="background: #9c27b0;"></span> Premium (₹2000)</div>
                            <div class="legend-item"><span class="legend-color" style="background: #d81b60;"></span> VIP Service</div>
                            <div class="legend-item"><span class="legend-color" style="background: #0288d1;"></span> Enhanced Privacy</div>
                        </div>
                    </div>
                    <button type="submit" class="book-button">Book Now</button>
                </form>
            `;
            flightList.appendChild(flightCard);
        }
    }

    function renderFlightClasses(flightId, flightClasses) {
        if (!flightClasses[flightId]) return '<p>No class data available.</p>';
        return Object.entries(flightClasses[flightId]).map(([cls, data]) => `
            <div class="info-box">
                <strong>${cls}</strong><br>₹${data.price.toFixed(2)}
            </div>
        `).join('');
    }

    function renderBins(flightId, bins) {
        if (!bins[flightId]) return '<p>No bin slots available for this flight.</p>';
        return bins[flightId].map(bin => `
            <div class="bin-slot" onclick="selectBin(${flightId}, '${bin.bin_slot}')">${bin.bin_slot}</div>
        `).join('');
    }

    function showSeats(flightId, classType) {
        if (!classType) {
            document.getElementById(`seat-map-${flightId}`).innerHTML = '';
            document.getElementById(`premium-seat-grid-${flightId}`).innerHTML = '';
            return;
        }

        document.getElementById(`selected-class-${flightId}`).value = classType;

        const seats = flightData.seats[flightId][classType] || {};
        const seatMap = document.getElementById(`seat-map-${flightId}`);
        const premiumSeatGrid = document.getElementById(`premium-seat-grid-${flightId}`);
        seatMap.setAttribute('data-selected-class', classType);

        let standardHtml = '<h4>Standard Seats</h4><div class="seat-grid">';
        let premiumHtml = '';

        for (const seatNumber in seats) {
            const seat = seats[seatNumber];
            const isAvailable = seat.status === 'Available' && (!seat.reserved_until || new Date(seat.reserved_until) < new Date());
            const isReserved = seat.status === 'Available' && seat.reserved_until && new Date(seat.reserved_until) >= new Date();
            const seatClass = isAvailable ? 'available' : (isReserved ? 'reserved' : 'booked');
            const isPremium = seat.is_premium == 1;
            const premiumClass = isPremium ? 'premium' : '';
            const extraCost = seat.extra_cost > 0 ? ` (₹${seat.extra_cost})` : '';

            let luxuryFeature = '';
            if (isPremium) {
                if (['1A', '1B', '1C', '2A', '2B'].includes(seatNumber)) {
                    luxuryFeature = 'vip-service';
                } else if (['3A', '3B', '3C', '4A', '4B'].includes(seatNumber)) {
                    luxuryFeature = 'enhanced-privacy';
                }
            }

            if (isPremium) {
                premiumHtml += `<div class="seat ${seatClass} ${premiumClass} ${luxuryFeature}" data-label="${luxuryFeature === 'vip-service' ? 'VIP' : 'EP'}" onclick="selectSeat(${flightId}, '${seatNumber}', ${isAvailable})">${seatNumber}${extraCost}</div>`;
            } else {
                standardHtml += `<div class="seat ${seatClass}" onclick="selectSeat(${flightId}, '${seatNumber}', ${isAvailable})">${seatNumber}${extraCost}</div>`;
            }
        }
        standardHtml += '</div>';
        seatMap.innerHTML = standardHtml;
        premiumSeatGrid.innerHTML = premiumHtml;
    }

    function selectSeat(flightId, seatNumber, isAvailable) {
        if (!isAvailable) {
            alert('This seat is already booked or reserved.');
            return;
        }
        document.getElementById(`selected-seat-${flightId}`).value = seatNumber;
        const seats = document.querySelectorAll(`#seat-map-${flightId} .seat, #premium-seat-grid-${flightId} .seat`);
        seats.forEach(seat => seat.classList.remove('selected'));
        const selectedSeat = Array.from(seats).find(seat => seat.textContent.includes(seatNumber));
        if (selectedSeat) selectedSeat.classList.add('selected');
    }

    function togglePremiumSeats(flightId) {
        const premiumButton = document.getElementById(`premium-button-${flightId}`);
        const premiumSeatsDiv = document.getElementById(`premium-seats-${flightId}`);
        const premiumEnabledInput = document.getElementById(`premium-enabled-${flightId}`);
        const isActive = premiumButton.classList.toggle('active');

        premiumSeatsDiv.style.display = isActive ? 'block' : 'none';
        premiumEnabledInput.value = isActive ? '1' : '0';
        if (!isActive) {
            document.getElementById(`selected-seat-${flightId}`).value = '';
            document.querySelectorAll(`#premium-seat-grid-${flightId} .seat`).forEach(seat => seat.classList.remove('selected'));
        }
    }

    function toggleLuggageOptions(flightId) {
        const luggageButton = document.getElementById(`luggage-button-${flightId}`);
        const luggageOptionsDiv = document.getElementById(`luggage-options-${flightId}`);
        const luggageEnabledInput = document.getElementById(`luggage-enabled-${flightId}`);
        const isActive = luggageButton.classList.toggle('active');

        luggageOptionsDiv.style.display = isActive ? 'block' : 'none';
        luggageEnabledInput.value = isActive ? '1' : '0';
        if (!isActive) {
            document.getElementById(`selected-bin-${flightId}`).value = '';
            document.querySelectorAll(`#bin-grid-${flightId} .bin-slot`).forEach(slot => slot.classList.remove('selected'));
        }
    }

    function selectBin(flightId, binSlot) {
        document.getElementById(`selected-bin-${flightId}`).value = binSlot;
        const binSlots = document.querySelectorAll(`#bin-grid-${flightId} .bin-slot`);
        binSlots.forEach(slot => slot.classList.remove('selected'));
        const selectedBin = Array.from(binSlots).find(slot => slot.textContent === binSlot);
        if (selectedBin) selectedBin.classList.add('selected');
    }

    function validateForm(flightId) {
        const selectedClass = document.getElementById(`selected-class-${flightId}`).value;
        const selectedSeat = document.getElementById(`selected-seat-${flightId}`).value;
        if (!selectedClass || !selectedSeat) {
            alert('Please select a class and seat before booking.');
            return false;
        }
        return true;
    }

    function handleBooking(event, flightId) {
        event.preventDefault();

        if (!validateForm(flightId)) return;

        const form = document.getElementById(`booking-form-${flightId}`);
        const formData = new FormData(form);
        const data = Object.fromEntries(formData);

        // Calculate total cost
        const selectedClass = data.class;
        const classPrice = flightData.flight_classes[flightId][selectedClass].price;
        let totalCost = classPrice;
        if (data.premium_enabled === '1') totalCost += 2000;
        if (data.luggage_enabled === '1') totalCost += 300;

        // Create URL parameters
        const params = new URLSearchParams({
            flightId: data.flightId,
            flightName: data.flightName,
            route: data.route,
            departure: data.departure,
            arrival: data.arrival,
            class: data.class,
            seat: data.seat,
            bin_slot: data.bin_slot || '',
            premium_enabled: data.premium_enabled,
            luggage_enabled: data.luggage_enabled,
            total_cost: totalCost
        });

        // Redirect to confirm_booking.html
        window.location.href = `confirm_booking.html?${params.toString()}`;
    }

    function filterFlights() {
        const searchFrom = document.getElementById('searchFrom').value.toLowerCase();
        const searchTo = document.getElementById('searchTo').value.toLowerCase();

        const flightCards = document.querySelectorAll('.flight-card');

        flightCards.forEach(card => {
            const from = card.getAttribute('data-from').toLowerCase();
            const to = card.getAttribute('data-to').toLowerCase();

            if (from.includes(searchFrom) && to.includes(searchTo)) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    }

    function toggleChatbot() {
        const chatbot = document.getElementById('chatbot');
        chatbot.style.display = chatbot.style.display === 'flex' ? 'none' : 'flex';
    }

    function sendMessage() {
        const input = document.getElementById('chatbot-input');
        const message = input.value.trim();
        if (!message) return;

        const chatBody = document.getElementById('chatbot-body');
        chatBody.innerHTML += `<div class="chat-message user">${message}</div>`;
        input.value = '';
        chatBody.scrollTop = chatBody.scrollHeight;

        setTimeout(() => {
            let botResponse = '';
            const lowerMessage = message.toLowerCase();
            if (lowerMessage.includes('flight status')) {
                botResponse = 'Please provide your flight number (e.g., AI101) to check status.';
            } else if (lowerMessage.includes('seat')) {
                botResponse = 'Select a seat from the seat map. Premium seats (₹2000) are available—unlock them!';
            } else if (lowerMessage.includes('luggage') || lowerMessage.includes('bin')) {
                botResponse = 'Reserve bin space for ₹300 by clicking "Reserve Luggage Space".';
            } else if (lowerMessage.includes('recommend')) {
                botResponse = 'I recommend premium seats (₹2000) for comfort and a bin slot for luggage.';
            } else {
                botResponse = 'Ask about flight status, seats (premium ₹2000), or luggage. How can I assist? ✈️';
            }
            chatBody.innerHTML += `<div class="chat-message bot">${botResponse}</div>`;
            chatBody.scrollTop = chatBody.scrollHeight;
        }, 1000);
    }
</script>
</body>
</html>